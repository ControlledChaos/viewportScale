/* viewportScale v0.3 | Author: Neil Gardner, 2014 | License: GPL */
(function($){$.fn.viewportScale=function(units,resizeOn,skipDetection){var element=this,numEls=0,vhSupported=false,ww=0,wh=0,wmin=0,wmax=0,props={},unitRgx=new RegExp("\\b(\\d+(\\.\\d+)*)\\s*(v([wh]|max|min))"),supported=false;var detectSupport=function(){var b=$("body");if(b.hasClass("vh-checked")==false){var div=$("<div />"),className="vh-checked";wh=$(window).outerHeight();if(div.length>0){b.append(div);div.css({position:"fixed",height:"100vh","font-size":"2vh","z-index":-2e3});supported=div.outerHeight()>wh*.95&&div.outerHeight()<wh*1.05;if(supported){var fsPx=div.css("font-size"),fract=0;if(fsPx){fsPx=fsPx.replace(/[a-z]/g,"");if($.isNumeric(fsPx)){fsPx=fsPx-0;fract=wh/fsPx;supported=fract>49&&fract<51}}}div.remove();if(supported){className+=" vh-supported"}b.addClass(className)}}else{supported=b.hasClass("vh-supported")}};var gaugeWindowSize=function(){if(window.viewportSize){ww=window.viewportSize.getWidth()}else{ww=$(window).outerWidth()}wh=$(window).outerHeight();if(wh>ww){wmax=wh;wmin=ww}else{wmax=ww;wmin=wh}};var translatePc=function(pc,wUnit){if($.isNumeric(pc)){return Math.ceil(pc/100*wUnit)+"px"}return false};var resetSize=function(){var attrs={},prop,u,ws;gaugeWindowSize();for(key in props){prop=props[key];ws=false;if("none"!=prop.unit){switch(prop.unit){case"vw":ws=ww;break;case"vh":ws=wh;break;case"vmax":ws=wmax;break;case"vmin":ws=wmin;break}if($.isNumeric(ws)){attrs[key]=translatePc(prop.num,ws)}}}element.css(attrs)};var matchUnit=function(str){var prop={unit:"none",num:null};if(str.length>1){var match=str.match(unitRgx);if($.isNumeric(match[1])){switch(match[3]){case"vw":case"vh":case"vmin":case"vmax":prop.unit=match[3];prop.num=match[1]-0;break}}}return prop};var apply=function(){var valid=false;if(typeof units=="string"){units=units.toLowerCase();var parts=units.split(","),i=0,prop;for(;i<parts.length;i++){if(parts[i].length>1){prop=matchUnit(parts[i]);switch(prop.unit){case"vw":props.width=prop;valid=true;break;case"vh":props.height=prop;valid=true;break}}}}else if(typeof units=="object"){var strVal,prop;for(key in units){strVal=units[key];switch(key){case"width":case"height":case"top":case"bottom":case"left":case"right":case"min-width":case"max-width":case"min-height":case"max-height":case"font-size":prop=matchUnit(strVal);if(prop.unit!="none"){props[key]=prop;valid=true}break}}}if(valid){resetSize();if(resizeOn!==false){$(window).on("resize.viewport",resetSize)}}};var init=function(){numEls=element.length;if(numEls>0){if(!skipDetection){detectSupport()}if(!supported){apply()}}};init();return this}})(jQuery);